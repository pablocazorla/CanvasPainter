var colorCtrl=function(a){return this.init(a)};colorCtrl.prototype={init:function(a){this.canvasSV=document.getElementById("color-cnv-gradient-sat-val"),this.canvasH=document.getElementById("color-cnv-gradient-hue"),this.sample=document.getElementById("color-ctrl-current-sample"),this.info=document.getElementById("color-ctrl-current-info"),this.cSV=this.canvasSV.getContext("2d"),this.cH=this.canvasH.getContext("2d"),this.cursorSV=document.getElementById("color-sat-val-cursor"),this.cursorH=document.getElementById("color-hue-cursor"),this.valGr=this.cSV.createLinearGradient(0,0,0,140),this.valGr.addColorStop(0,"rgba(0,0,0,0)"),this.valGr.addColorStop(1,"rgba(0,0,0,1)");var b=this.cH.createLinearGradient(0,0,0,140);return b.addColorStop(0,"rgb(255,0,0)"),b.addColorStop(1/6,"rgb(255,255,0)"),b.addColorStop(1/3,"rgb(0,255,0)"),b.addColorStop(.5,"rgb(0,255,255)"),b.addColorStop(2/3,"rgb(0,0,255)"),b.addColorStop(5/6,"rgb(255,0,255)"),b.addColorStop(1,"rgb(255,0,0)"),this.cH.fillStyle=b,this.cH.fillRect(0,0,20,140),this.setSliders().setEvents(),a?this.setColor(a):this.setColor("#000000"),this},setColor:function(a){return app.forecolor.color(a),this.update(),this},update:function(){return this.updateInfo().drawSV().updateCursors().updateSliders(),this},updateInfo:function(){this.sample.style.backgroundColor=app.forecolor.hex();var a="hex: "+app.forecolor.hex()+"<br>rgb: "+app.forecolor.r()+", "+app.forecolor.g()+", "+app.forecolor.b()+"<br>hsv: "+Math.round(100*app.forecolor.h())+"%, "+Math.round(100*app.forecolor.s())+"%, "+Math.round(100*app.forecolor.v())+"%";return this.info.innerHTML=a,this},drawSV:function(){var a=app.forecolor.hsvToRgb({h:app.forecolor.h(),s:1,v:1});return this.satGr=this.cSV.createLinearGradient(0,0,140,0),this.satGr.addColorStop(0,"rgb(255,255,255)"),this.satGr.addColorStop(1,"rgb("+a.r+","+a.g+","+a.b+")"),this.cSV.fillStyle=this.satGr,this.cSV.fillRect(0,0,140,140),this.cSV.fillStyle=this.valGr,this.cSV.fillRect(0,0,140,140),this},updateCursors:function(){return this.cursorH.style.top=Math.round(140*app.forecolor.h())+"px",this.cursorSV.style.top=140-Math.round(140*app.forecolor.v())+"px",this.cursorSV.style.left=Math.round(140*app.forecolor.s())+"px",this},setHueFromMouse:function(a){var b=a.pageY-this.canvasH.getBoundingClientRect().top;0>b&&(b=0),b>140&&(b=140),this.cursorH.style.top=b+"px",app.forecolor.h(b/140),this.update()},setSVFromMouse:function(a){var b=a.pageX-this.canvasSV.getBoundingClientRect().left,c=a.pageY-this.canvasSV.getBoundingClientRect().top;0>b&&(b=0),b>140&&(b=140),0>c&&(c=0),c>140&&(c=140),this.cursorSV.style.left=b+"px",this.cursorSV.style.top=c+"px",app.forecolor.s(b/140).v(1-c/140),this.update()},setEvents:function(){var a=this,b=!1,c=!1,d=function(b){c=!0,a.setHueFromMouse(b)},e=function(c){b=!0,a.setSVFromMouse(c)},f=function(d){c&&a.setHueFromMouse(d),b&&a.setSVFromMouse(d)},g=function(){c&&(c=!1),b&&(b=!1)};return this.canvasH.addEventListener("mousedown",function(a){d(a)},!1),this.cursorH.addEventListener("mousedown",function(a){d(a)},!1),this.canvasSV.addEventListener("mousedown",function(a){e(a)},!1),this.cursorSV.addEventListener("mousedown",function(a){e(a)},!1),document.body.addEventListener("mousemove",function(a){f(a)},!1),document.body.addEventListener("mouseup",function(){g()},!1),this},setSliders:function(){var a=this,b=document.getElementById("color-sliders-rgb"),c=document.getElementById("color-sliders-hsv"),d=document.getElementById("tab-palet-rgb"),e=document.getElementById("tab-palet-hsv"),f=document.getElementById("color-sliders-rgb"),g=document.getElementById("color-sliders-hsv"),h=!0;return this.sliderR=new slider({parent:b,id:"slider-r",title:"Red",titleOver:"Red component",initVal:0,min:0,max:255,callback:function(){app.forecolor.r(a.sliderR.getValue()),a.update()}}),this.sliderG=new slider({parent:b,id:"slider-g",title:"Green",titleOver:"Green component",initVal:0,min:0,max:255,callback:function(){app.forecolor.g(a.sliderG.getValue()),a.update()}}),this.sliderB=new slider({parent:b,id:"slider-b",title:"Blue",titleOver:"Blue component",initVal:0,min:0,max:255,callback:function(){app.forecolor.b(a.sliderB.getValue()),a.update()}}),this.sliderH=new slider({parent:c,id:"slider-h",title:"Hue",titleOver:"Hue component",initVal:0,callback:function(){app.forecolor.h(a.sliderH.getValue()/100),a.update()}}),this.sliderS=new slider({parent:c,id:"slider-s",title:"Saturation",titleOver:"Saturation component",initVal:0,callback:function(){app.forecolor.s(a.sliderS.getValue()/100),a.update()}}),this.sliderV=new slider({parent:c,id:"slider-v",title:"Value",titleOver:"Value component",initVal:0,callback:function(){app.forecolor.v(a.sliderV.getValue()/100),a.update()}}),d.addEventListener("click",function(){h||(h=!0,d.className="tab-palet current",e.className="tab-palet",f.style.display="block",g.style.display="none",a.updateSliders())},!1),e.addEventListener("click",function(){h&&(h=!1,e.className="tab-palet current",d.className="tab-palet",g.style.display="block",f.style.display="none",a.updateSliders())},!1),this},updateSliders:function(){return this.sliderR.update(app.forecolor.r()),this.sliderG.update(app.forecolor.g()),this.sliderB.update(app.forecolor.b()),this.sliderH.update(100*app.forecolor.h()),this.sliderS.update(100*app.forecolor.s()),this.sliderV.update(100*app.forecolor.v()),this}};