var filters=function(){return this.init()};filters.prototype={imagedata:null,layer:null,doc:null,length:0,w:0,h:0,init:function(){return this.processingModal=document.getElementById("modal-processing"),this},update:function(){return this.doc=app.currentDoc,this.layer=app.currentDoc.layers[app.currentDoc.currentLayer],this.data=app.currentDoc.layers[app.currentDoc.currentLayer].imagedata.data,this.length=app.currentDoc.layers[app.currentDoc.currentLayer].imagedata.data.length,this.w=app.currentDoc.setting.width,this.h=app.currentDoc.setting.width,this},bucle:function(a){for(var b=0;b<this.length;b+=4)a(b);return this},invert:function(){this.procesing(!0);var a=this;return setTimeout(function(){a.update().bucle(function(b){a.data[b]=Math.abs(a.data[b]-255),a.data[b+1]=Math.abs(a.data[b+1]-255),a.data[b+2]=Math.abs(a.data[b+2]-255)}).updateImage()},50),this},updateImage:function(){return this.layer.imagedata.data=this.data,this.doc.rendererToImageDataLayer(!1).updateShowCurrent(),this.procesing(!1),this},procesing:function(a){return this.processingModal.style.display=a?"block":"none",this}};