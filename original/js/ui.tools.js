var toolsCtrl=function(){return this.init()};toolsCtrl.prototype={keydown:!1,currentTool:"brush",prevCurrentTool:null,init:function(){this.toolButtons=document.getElementsByClassName("btn-tool"),this.toolCtrlItem=document.getElementById("tool-ctrl-item");for(var a=this,b=0;b<this.toolButtons.length;b++)this.toolButtons[b].addEventListener("click",function(){a.setTool(this.id.substring(5))},!1);return document.addEventListener("keyup",function(b){a.setToolByKeyboardUp(b)},!1),document.addEventListener("keydown",function(b){a.setToolByKeyboardDown(b)},!1),this.slideZoom=new slider({parent:document.getElementById("slide-zoom-container"),id:"slider-zoom",title:"Zoom (%)",titleOver:"Zoom of the image",min:100*app.minZoom,max:100*app.maxZoom,initVal:100,startDisable:!0,callback:function(){try{app.currentDoc.setZoom(a.slideZoom.getValue()/100)}catch(b){}}}),document.getElementById("tool-zoom-hundred").addEventListener("click",function(){app.length>0&&app.currentDoc.setZoom(1)},!1),document.getElementById("tool-zoom-scaled").addEventListener("click",function(){app.length>0&&app.currentDoc.setZoom("scaled")},!1),document.getElementById("tool-zoom-minus").addEventListener("click",function(){app.length>0&&(app.zoomDirection=-1,app.currentDoc.setZoom(),app.zoomDirection=1)},!1),document.getElementById("tool-zoom-plus").addEventListener("click",function(){app.length>0&&(app.zoomDirection=1,app.currentDoc.setZoom())},!1),this},setTool:function(a){for(var b=0;b<this.toolButtons.length;b++)this.toolButtons[b].className="btn-icon big btn-tool";return document.getElementById("tool-"+a).className="btn-icon big btn-tool current",app.setCurrentTool(a),this.currentTool=a,this},setToolByKeyboardUp:function(a){try{var b=a.keyCode?a.keyCode:a.charCode,c="none";switch(b){case 66:c="brush";break;case 69:c="eraser";break;case 73:c="picker";break;case 72:c="hand";break;case 83:c="select";break;case 18:app.zoomDirection=1;break;case 107:app.zoomDirection=1,app.currentDoc.setZoom();break;case 109:app.zoomDirection=-1,app.currentDoc.setZoom(),app.zoomDirection=1;break;case 96:app.currentDoc.setZoom(1)}"none"!=c&&this.setTool(c),this.keydown=!1,null!=this.prevCurrentTool&&(this.setTool(this.prevCurrentTool),this.prevCurrentTool=null)}catch(a){}},setToolByKeyboardDown:function(a){try{var b=a.keyCode?a.keyCode:a.charCode;if(!this.keydown)switch(this.keydown=!0,a.altKey&&(this.prevCurrentTool=this.currentTool,this.setTool("picker"),app.zoomDirection=-1),b){case 32:this.prevCurrentTool=this.currentTool,this.setTool("hand")}}catch(a){}}};